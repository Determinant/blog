!function(a,b){var c=function(c){return a(c,b)};"function"==typeof define&&define.amd?define(["jquery"],c):"object"==typeof exports?module.exports=c:c(jQuery)}(function(a,b,c){a.fn.jScrollPane=function(d){function e(d,e){function f(b){var e,g,i,k,l,m,p=!1,q=!1;if(O=b,P===c)l=d.scrollTop(),m=d.scrollLeft(),d.css({overflow:"hidden",padding:0}),Q=d.innerWidth()+sa,R=d.innerHeight(),d.width(Q),P=a('<div class="jspPane" />').css("padding",ra).append(d.children()),S=a('<div class="jspContainer" />').css({width:Q+"px",height:R+"px"}).append(P).appendTo(d);else{if(d.css("width",""),p=O.stickToBottom&&B(),q=O.stickToRight&&C(),k=d.innerWidth()+sa!=Q||d.outerHeight()!=R,k&&(Q=d.innerWidth()+sa,R=d.innerHeight(),S.css({width:Q+"px",height:R+"px"})),!k&&ta==T&&P.outerHeight()==U)return void d.width(Q);ta=T,P.css("width",""),d.width(Q),S.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}P.css("overflow","auto"),T=b.contentWidth?b.contentWidth:P[0].scrollWidth,U=P[0].clientHeight,P.css("overflow",""),V=T/Q,W=U/R,X=W>1,Y=V>1,Y||X?(d.addClass("jspScrollable"),e=O.maintainPosition&&(_||ca),e&&(g=z(),i=A()),h(),j(),e&&(x(q?T-Q:g,!1),w(p?U-R:i,!1)),G(),D(),M(),O.enableKeyboardNavigation&&I(),O.clickOnTrack&&n(),K(),O.hijackInternalLinks&&L()):(d.removeClass("jspScrollable"),P.css({top:0,left:0,width:S.width()-sa}),E(),H(),J(),o()),O.autoReinitialise&&!qa?qa=setInterval(function(){f(O)},O.autoReinitialiseDelay):!O.autoReinitialise&&qa&&clearInterval(qa),l&&d.scrollTop(0)&&w(l,!1),m&&d.scrollLeft(0)&&x(m,!1),d.trigger("jsp-initialised",[Y||X])}function g(){ea.height(ga+"px"),_=0,fa=O.verticalGutter+ea.outerWidth(),P.width(Q-fa-sa);try{0===da.position().left&&P.css("margin-left",fa+"px")}catch(a){}}function h(){Y&&(S.append(a('<div class="jspHorizontalBar" />').append(a('<div class="jspCap jspCapLeft" />'),a('<div class="jspTrack" />').append(a('<div class="jspDrag" />').append(a('<div class="jspDragLeft" />'),a('<div class="jspDragRight" />'))),a('<div class="jspCap jspCapRight" />'))),ka=S.find(">.jspHorizontalBar"),la=ka.find(">.jspTrack"),aa=la.find(">.jspDrag"),O.showArrows&&(oa=a('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",l(-1,0)).bind("click.jsp",F),pa=a('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",l(1,0)).bind("click.jsp",F),O.arrowScrollOnHover&&(oa.bind("mouseover.jsp",l(-1,0,oa)),pa.bind("mouseover.jsp",l(1,0,pa))),k(la,O.horizontalArrowPositions,oa,pa)),aa.hover(function(){aa.addClass("jspHover")},function(){aa.removeClass("jspHover")}).bind("mousedown.jsp",function(b){a("html").bind("dragstart.jsp selectstart.jsp",F),aa.addClass("jspActive");var c=b.pageX-aa.position().left;return a("html").bind("mousemove.jsp",function(a){s(a.pageX-c,!1)}).bind("mouseup.jsp mouseleave.jsp",p),!1}),ma=S.innerWidth(),i())}function i(){S.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){ma-=a(this).outerWidth()}),la.width(ma+"px"),ca=0}function j(){if(Y&&X){var b=la.outerHeight(),c=ea.outerWidth();ga-=b,a(ka).find(">.jspCap:visible,>.jspArrow").each(function(){ma+=a(this).outerWidth()}),ma-=c,R-=c,Q-=b,la.parent().append(a('<div class="jspCorner" />').css("width",b+"px")),g(),i()}Y&&P.width(S.outerWidth()-sa+"px"),U=P.outerHeight(),W=U/R,Y&&(na=Math.ceil(1/V*ma),na>O.horizontalDragMaxWidth?na=O.horizontalDragMaxWidth:na<O.horizontalDragMinWidth&&(na=O.horizontalDragMinWidth),aa.width(na+"px"),ba=ma-na,t(ca)),X&&(ha=Math.ceil(1/W*ga),ha>O.verticalDragMaxHeight?ha=O.verticalDragMaxHeight:ha<O.verticalDragMinHeight&&(ha=O.verticalDragMinHeight),Z.height(ha+"px"),$=ga-ha,r(_))}function k(a,b,c,d){var e,f="before",g="after";"os"==b&&(b=/Mac/.test(navigator.platform)?"after":"split"),b==f?g=b:b==g&&(f=b,e=c,c=d,d=e),a[f](c)[g](d)}function l(a,b,c){return function(){return m(a,b,this,c),this.blur(),!1}}function m(b,c,d,e){d=a(d).addClass("jspActive");var f,g,h=!0,i=function(){0!==b&&ua.scrollByX(b*O.arrowButtonSpeed),0!==c&&ua.scrollByY(c*O.arrowButtonSpeed),g=setTimeout(i,h?O.initialDelay:O.arrowRepeatFreq),h=!1};i(),f=e?"mouseout.jsp":"mouseup.jsp",e=e||a("html"),e.bind(f,function(){d.removeClass("jspActive"),g&&clearTimeout(g),g=null,e.unbind(f)})}function n(){o(),X&&ea.bind("mousedown.jsp",function(b){if(b.originalTarget===c||b.originalTarget==b.currentTarget){var d,e=a(this),f=e.offset(),g=b.pageY-f.top-_,h=!0,i=function(){var a=e.offset(),c=b.pageY-a.top-ha/2,f=R*O.scrollPagePercent,k=$*f/(U-R);if(0>g)_-k>c?ua.scrollByY(-f):q(c);else{if(!(g>0))return void j();c>_+k?ua.scrollByY(f):q(c)}d=setTimeout(i,h?O.initialDelay:O.trackClickRepeatFreq),h=!1},j=function(){d&&clearTimeout(d),d=null,a(document).unbind("mouseup.jsp",j)};return i(),a(document).bind("mouseup.jsp",j),!1}}),Y&&la.bind("mousedown.jsp",function(b){if(b.originalTarget===c||b.originalTarget==b.currentTarget){var d,e=a(this),f=e.offset(),g=b.pageX-f.left-ca,h=!0,i=function(){var a=e.offset(),c=b.pageX-a.left-na/2,f=Q*O.scrollPagePercent,k=ba*f/(T-Q);if(0>g)ca-k>c?ua.scrollByX(-f):s(c);else{if(!(g>0))return void j();c>ca+k?ua.scrollByX(f):s(c)}d=setTimeout(i,h?O.initialDelay:O.trackClickRepeatFreq),h=!1},j=function(){d&&clearTimeout(d),d=null,a(document).unbind("mouseup.jsp",j)};return i(),a(document).bind("mouseup.jsp",j),!1}})}function o(){la&&la.unbind("mousedown.jsp"),ea&&ea.unbind("mousedown.jsp")}function p(){a("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),Z&&Z.removeClass("jspActive"),aa&&aa.removeClass("jspActive")}function q(a,b){X&&(0>a?a=0:a>$&&(a=$),b===c&&(b=O.animateScroll),b?ua.animate(Z,"top",a,r):(Z.css("top",a),r(a)))}function r(a){a===c&&(a=Z.position().top),S.scrollTop(0),_=a||0;var b=0===_,e=_==$,f=a/$,g=-f*(U-R);(va!=b||xa!=e)&&(va=b,xa=e,d.trigger("jsp-arrow-change",[va,xa,wa,ya])),u(b,e),P.css("top",g),d.trigger("jsp-scroll-y",[-g,b,e]).trigger("scroll")}function s(a,b){Y&&(0>a?a=0:a>ba&&(a=ba),b===c&&(b=O.animateScroll),b?ua.animate(aa,"left",a,t):(aa.css("left",a),t(a)))}function t(a){a===c&&(a=aa.position().left),S.scrollTop(0),ca=a||0;var b=0===ca,e=ca==ba,f=a/ba,g=-f*(T-Q);(wa!=b||ya!=e)&&(wa=b,ya=e,d.trigger("jsp-arrow-change",[va,xa,wa,ya])),v(b,e),P.css("left",g),d.trigger("jsp-scroll-x",[-g,b,e]).trigger("scroll")}function u(a,b){O.showArrows&&(ia[a?"addClass":"removeClass"]("jspDisabled"),ja[b?"addClass":"removeClass"]("jspDisabled"))}function v(a,b){O.showArrows&&(oa[a?"addClass":"removeClass"]("jspDisabled"),pa[b?"addClass":"removeClass"]("jspDisabled"))}function w(a,b){var c=a/(U-R);q(c*$,b)}function x(a,b){var c=a/(T-Q);s(c*ba,b)}function y(b,c,d){var e,f,g,h,i,j,k,l,m,n=0,o=0;try{e=a(b)}catch(p){return}for(f=e.outerHeight(),g=e.outerWidth(),S.scrollTop(0),S.scrollLeft(0);!e.is(".jspPane");)if(n+=e.position().top,o+=e.position().left,e=e.offsetParent(),/^body|html$/i.test(e[0].nodeName))return;h=A(),j=h+R,h>n||c?l=n-O.horizontalGutter:n+f>j&&(l=n-R+f+O.horizontalGutter),isNaN(l)||w(l,d),i=z(),k=i+Q,i>o||c?m=o-O.horizontalGutter:o+g>k&&(m=o-Q+g+O.horizontalGutter),isNaN(m)||x(m,d)}function z(){return-P.position().left}function A(){return-P.position().top}function B(){var a=U-R;return a>20&&a-A()<10}function C(){var a=T-Q;return a>20&&a-z()<10}function D(){S.unbind(Aa).bind(Aa,function(a,b,c,d){ca||(ca=0),_||(_=0);var e=ca,f=_,g=a.deltaFactor||O.mouseWheelSpeed;return ua.scrollBy(c*g,-d*g,!1),e==ca&&f==_})}function E(){S.unbind(Aa)}function F(){return!1}function G(){P.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(a){y(a.target,!1)})}function H(){P.find(":input,a").unbind("focus.jsp")}function I(){function b(){var a=ca,b=_;switch(c){case 40:ua.scrollByY(O.keyboardSpeed,!1);break;case 38:ua.scrollByY(-O.keyboardSpeed,!1);break;case 34:case 32:ua.scrollByY(R*O.scrollPagePercent,!1);break;case 33:ua.scrollByY(-R*O.scrollPagePercent,!1);break;case 39:ua.scrollByX(O.keyboardSpeed,!1);break;case 37:ua.scrollByX(-O.keyboardSpeed,!1)}return e=a!=ca||b!=_}var c,e,f=[];Y&&f.push(ka[0]),X&&f.push(da[0]),P.focus(function(){d.focus()}),d.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(d){if(d.target===this||f.length&&a(d.target).closest(f).length){var g=ca,h=_;switch(d.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:c=d.keyCode,b();break;case 35:w(U-R),c=null;break;case 36:w(0),c=null}return e=d.keyCode==c&&g!=ca||h!=_,!e}}).bind("keypress.jsp",function(a){return a.keyCode==c&&b(),!e}),O.hideFocus?(d.css("outline","none"),"hideFocus"in S[0]&&d.attr("hideFocus",!0)):(d.css("outline",""),"hideFocus"in S[0]&&d.attr("hideFocus",!1))}function J(){d.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function K(){if(location.hash&&location.hash.length>1){var b,c,d=escape(location.hash.substr(1));try{b=a("#"+d+', a[name="'+d+'"]')}catch(e){return}b.length&&P.find(d)&&(0===S.scrollTop()?c=setInterval(function(){S.scrollTop()>0&&(y(b,!0),a(document).scrollTop(S.position().top),clearInterval(c))},50):(y(b,!0),a(document).scrollTop(S.position().top)))}}function L(){a(document.body).data("jspHijack")||(a(document.body).data("jspHijack",!0),a(document.body).delegate("a[href*=#]","click",function(c){var d,e,f,g,h,i,j=this.href.substr(0,this.href.indexOf("#")),k=location.href;if(-1!==location.href.indexOf("#")&&(k=location.href.substr(0,location.href.indexOf("#"))),j===k){d=escape(this.href.substr(this.href.indexOf("#")+1));try{e=a("#"+d+', a[name="'+d+'"]')}catch(l){return}e.length&&(f=e.closest(".jspScrollable"),g=f.data("jsp"),g.scrollToElement(e,!0),f[0].scrollIntoView&&(h=a(b).scrollTop(),i=e.offset().top,(h>i||i>h+a(b).height())&&f[0].scrollIntoView()),c.preventDefault())}}))}function M(){var a,b,c,d,e,f=!1;S.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(g){var h=g.originalEvent.touches[0];a=z(),b=A(),c=h.pageX,d=h.pageY,e=!1,f=!0}).bind("touchmove.jsp",function(g){if(f){var h=g.originalEvent.touches[0],i=ca,j=_;return ua.scrollTo(a+c-h.pageX,b+d-h.pageY),e=e||Math.abs(c-h.pageX)>5||Math.abs(d-h.pageY)>5,i==ca&&j==_}}).bind("touchend.jsp",function(a){f=!1}).bind("click.jsp-touchclick",function(a){return e?(e=!1,!1):void 0})}function N(){var a=A(),b=z();d.removeClass("jspScrollable").unbind(".jsp"),d.replaceWith(za.append(P.children())),za.scrollTop(a),za.scrollLeft(b),qa&&clearInterval(qa)}var O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua=this,va=!0,wa=!0,xa=!1,ya=!1,za=d.clone(!1,!1).empty(),Aa=a.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";"border-box"===d.css("box-sizing")?(ra=0,sa=0):(ra=d.css("paddingTop")+" "+d.css("paddingRight")+" "+d.css("paddingBottom")+" "+d.css("paddingLeft"),sa=(parseInt(d.css("paddingLeft"),10)||0)+(parseInt(d.css("paddingRight"),10)||0)),a.extend(ua,{reinitialise:function(b){b=a.extend({},O,b),f(b)},scrollToElement:function(a,b,c){y(a,b,c)},scrollTo:function(a,b,c){x(a,c),w(b,c)},scrollToX:function(a,b){x(a,b)},scrollToY:function(a,b){w(a,b)},scrollToPercentX:function(a,b){x(a*(T-Q),b)},scrollToPercentY:function(a,b){w(a*(U-R),b)},scrollBy:function(a,b,c){ua.scrollByX(a,c),ua.scrollByY(b,c)},scrollByX:function(a,b){var c=z()+Math[0>a?"floor":"ceil"](a),d=c/(T-Q);s(d*ba,b)},scrollByY:function(a,b){var c=A()+Math[0>a?"floor":"ceil"](a),d=c/(U-R);q(d*$,b)},positionDragX:function(a,b){s(a,b)},positionDragY:function(a,b){q(a,b)},animate:function(a,b,c,d){var e={};e[b]=c,a.animate(e,{duration:O.animateDuration,easing:O.animateEase,queue:!1,step:d})},getContentPositionX:function(){return z()},getContentPositionY:function(){return A()},getContentWidth:function(){return T},getContentHeight:function(){return U},getPercentScrolledX:function(){return z()/(T-Q)},getPercentScrolledY:function(){return A()/(U-R)},getIsScrollableH:function(){return Y},getIsScrollableV:function(){return X},getContentPane:function(){return P},scrollToBottom:function(a){q($,a)},hijackInternalLinks:a.noop,destroy:function(){N()}}),f(e)}return d=a.extend({},a.fn.jScrollPane.defaults,d),a.each(["arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){d[this]=d[this]||d.speed}),this.each(function(){var b=a(this),c=b.data("jsp");c?c.reinitialise(d):(a("script",b).filter('[type="text/javascript"],:not([type])').remove(),c=new e(b,d),b.data("jsp",c))})},a.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:c,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:3,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}},this);